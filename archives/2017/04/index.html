
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Devlog">
    <title>Archives: 2017/4 - Devlog</title>
    <meta name="author" content="Jbee">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/feed.xml">
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="blog posted about front end development">
<meta property="og:type" content="blog">
<meta property="og:title" content="Devlog">
<meta property="og:url" content="https://jaeyeophan.github.io/archives/2017/04/index.html">
<meta property="og:site_name" content="Devlog">
<meta property="og:description" content="blog posted about front end development">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Devlog">
<meta name="twitter:description" content="blog posted about front end development">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Devlog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Search"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://stackoverflow.com/users" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://plus.google.com/" target="_blank" rel="noopener" title="Google +">
                    
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/profile/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mailto"
                            title="Mail"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/30/issue-management-tool/">
                            [Tool] Issue Management Tool, Zenhub
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-30T00:30:28+09:00">
	
		    Apr 30, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Tool/">Tool</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/github_logo.jpg" alt=""></p>
<h1 id="Issue-Management-Tool"><a href="#Issue-Management-Tool" class="headerlink" title="Issue Management Tool"></a>Issue Management Tool</h1><p>개발자들에게 정말 많은 사랑을 받고 있는 <code>Github</code>. 이제는 더 이상 없어서는 안 될 존재가 되었는데요:) 이 Github도 약간 아쉬운 부분이 존재합니다. 그래서 이번 포스팅에서는 Github과 함께 사용할 수 있는 <code>Issue Management Tool</code> 몇 가지를 소개해드리려고 합니다. (Github도 이에 대한 필요성을 느끼고 <code>Project</code>라는 이름의 기능을 추가하였는데요, 이것과 비교도 해보겠습니다.)<br>Github Help에서 제공하는 <a href="https://help.github.com/articles/managing-your-work-with-issues/" target="_blank" rel="external">Issue 관리에 대한 자료</a>입니다. 이 포스팅을 읽기 전에 참고해봐도 좋을 것 같습니다.</p>
<h2 id="Agile이라는-녀석"><a href="#Agile이라는-녀석" class="headerlink" title="Agile이라는 녀석,"></a>Agile이라는 녀석,</h2><p><img src="/images/agile_cloud_tag.png" alt=""><br> <em> reference&gt;<a href="http://www.onedesk.com/scrum-methodology-vs-agile-methodology/" target="_blank" rel="external">http://www.onedesk.com/scrum-methodology-vs-agile-methodology/</a></em><br><code>Agile 방법론</code>이 대두되면서, 프로젝트의 진행 상황을 공유하고 관리하는 것이 전보다 복잡하고 중요해졌습니다.(<a href="http://blog.rightbrain.co.kr/?p=5810" target="_blank" rel="external">Agile이란 무엇인가</a>) 개발자들간의 의사소통은 물론이고 프로젝트를 관리하는 매니저, 팀장 등과의 의사소통이 매우 중요해졌는데요, 이러한 상황 속에서 매번 회의를 하거나 서로에게 물어보면 그만큼 생산성이 감소하게 됩니다. 보다 효율적으로, Agile하게 프로젝트가 진행될 수 있도록 각종 도구들을 제대로 알고 팀에 적합한 도구를 고르는 것이 중요해졌습니다.</p>
<h2 id="Github이-제공하는-기능들"><a href="#Github이-제공하는-기능들" class="headerlink" title="Github이 제공하는 기능들"></a>Github이 제공하는 기능들</h2><p><img src="/images/default_github.png" alt=""><br>프로젝트 Repository안에는 viewer인 <code>Code</code> 탭, task 관리를 위한 <code>Issue</code>탭, 그리고 이 이슈들을 관리하기 위한 <code>Label</code>과 <code>Milestone</code>이 존재합니다. 프로젝트에서 진행되고 있는 Issue의 상태(Status) 또는 성격을 <code>Label</code>이라는 Metadata로 관리할 수 있고, <code>Milestone</code>이란 기능으로 단기적인 목표의 기간을 관리할 수 있습니다. 또 <code>Project</code>라는 탭을 통해 kanban 형식으로 Issue들을 관리할 수 있습니다. Trello라는 서비스를 아시나요? Tello가 대표적인 <strong>kanban 형식의 dashboard</strong> 입니다.</p>
<p><em>cf&gt; 포스팅에서 언급되는 <code>기존 형식의 dashboard</code>란 Agile workflow를 중심으로 드래그 앤 드롭을 통한 우선순위 선정 기능, Label 기능, Real-time dashboard 기능 등을 포함한 kanban 형식의 dashboard을 말합니다.</em></p>
<h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h2><p>Github에서 제공하는 다양한 Plugin 형태의 Tool들은 <a href="https://github.com/integrations" target="_blank" rel="external">Integration Tab</a>에서 볼 수 있습니다. 이미 널리 알려진 <code>JIRA</code>를 제외하고 몇 가지 Tool들을 알아보겠습니다:) 제 나름대로의 판단 기준을 갖고 검색해보았습니다.</p>
<ol>
<li>기존의 Github Repository와 연동이 잘 되는가?</li>
<li>어떤 형식으로 dashboard를 제공하는가? (kanban 형식인가?)</li>
<li>UI/UX적으로 어떤가?</li>
<li>부가적인 기능에는 무엇이 있는가?</li>
</ol>
<h2 id="Zenhub"><a href="#Zenhub" class="headerlink" title="Zenhub"></a>Zenhub</h2><p><img src="/images/zenhub.png" alt=""><br><code>Zenhub</code>은 기존 형식의 dashboard를 제공합니다. Repository 기준으로 dashboard가 생성되고 기존에 등록되어 있던 Issue들은 물론이고 추후 생성하는 Issue들은 <code>New Issues</code>라는 column으로 들어갑니다. 가장 기본적이고 중요한 Github과의 연동은 문제가 없습니다.</p>
<h3 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h3><h4 id="기존의-Github에서-Tab만-추가되는-형식"><a href="#기존의-Github에서-Tab만-추가되는-형식" class="headerlink" title="기존의 Github에서 Tab만 추가되는 형식"></a>기존의 Github에서 Tab만 추가되는 형식</h4><p><img src="/images/zenhub_plugin.png" alt=""><br>기존의 Github에서 제공하는 탭에서 Board라는 탭과 Report라는 탭이 추가되었습니다. <code>Zenhub</code>을 추가하게 되면 자동으로 Repository마다 저런 형식으로 탭이 추가됩니다. 기존 Github에서 제공되는 기능에서 Board라는 탭이 추가되는 형식이기 때문에 기존의 Github을 그대로 이용할 수 있다는 장점이 있습니다.</p>
<h4 id="Chrome-Extension"><a href="#Chrome-Extension" class="headerlink" title="Chrome Extension"></a>Chrome Extension</h4><p><img src="/images/zenhub_chrome_extension.png" alt=""><br>원한다면 Chrome extension을 추가하여 브라우저 어디에서든 변동사항을 파악할 수 있다는 장점도 존재합니다. 접근성면에서 아주 좋습니다.</p>
<h4 id="Metadata를-통한-Issue-구체화"><a href="#Metadata를-통한-Issue-구체화" class="headerlink" title="Metadata를 통한 Issue 구체화"></a>Metadata를 통한 Issue 구체화</h4><p><code>Zenhub</code>은 Github에서 제공하는 Issue Metadata들에서 추가적으로 몇 가지 기능을 더 제공합니다.<br><img src="/images/zenhub_modal.png" alt=""></p>
<h5 id="1-Pipeline"><a href="#1-Pipeline" class="headerlink" title="1. Pipeline"></a>1. Pipeline</h5><p>제공되는 dashboard를 기준으로 제공되는 <code>Pipleline</code>이라는 기능으로 Issue의 Status를 설정할 수 있습니다.</p>
<h5 id="2-Epic"><a href="#2-Epic" class="headerlink" title="2. Epic"></a>2. Epic</h5><p>Github에서는 Issue들을 명시적으로 <code>그룹화</code>할 방법이 없었습니다. <code>Label</code>을 통해서 어떻게든 그룹화하려면 할 수는 있었지만, 아쉬운 점이 많았습니다. <code>Zenhub</code>에서는 <code>epic</code>이라는 기능을 제공하여 Issue들을 그룹화할 수 있습니다.</p>
<h5 id="3-Estimate"><a href="#3-Estimate" class="headerlink" title="3. Estimate"></a>3. Estimate</h5><p>Issue에 <code>Estimate</code>라는 Metadata를 이용하여 해당 Issue의 <code>복잡도(complexity)</code>를 설정할 수 있습니다. <code>1, 2, 3, 5, 8, 13, 21, 40</code>이라는 총 8단계의 레벨을 제공하고 있습니다. 팀 내부에서의 회의를 통해 일정을 산정하고 그에 맞는 레벨을 설정할 수 있습니다. 플래닝 포커라는 방법으로 일정을 산출할 수 있습니다. <em>&gt; 참고자료:<a href="http://bcho.tistory.com/1041" target="_blank" rel="external">플래닝 포커를 이용한 프로젝트 일정 산정</a></em></p>
<h4 id="Merge-repository"><a href="#Merge-repository" class="headerlink" title="Merge repository"></a>Merge repository</h4><p><img src="/images/merge_repository.png" alt=""><br>Respository를 <code>merge</code>하여 <strong>하나의 dashboard에서 복수 개의 Respository를</strong> 관리할 수 있습니다. 여러 프로젝트를 통합하여 관리해야 한다면 <code>Zenhub</code>의 merge 기능을 이용할 수 있습니다. 개인 Issue 관리 Repository를 따로 만들어서 자신만의 Issue를 관리할 수 있겠네요:)</p>
<h4 id="Report-기능"><a href="#Report-기능" class="headerlink" title="Report 기능"></a>Report 기능</h4><p><img src="/images/zenhub_report.png" alt=""><br><code>Burndown</code>, <code>Velocity tracking</code>, <code>Release Report</code> 세 가지의 옵션으로 그래프 형식의 보고서를 보여줍니다. 지정한 <code>Milestone</code>의 진행 상황을 한 눈에 살펴볼 수 있는 좋은 기능입니다 :) <code>Label</code>에 따라서 또는 Issue의 상태에 따라서 다양한 보고서를 볼 수 있습니다.</p>
<h4 id="To-do-list"><a href="#To-do-list" class="headerlink" title="To do list"></a>To do list</h4><p><img src="/images/zenhub_topbar.png" alt=""><br><code>Zenhub</code>플러그인을 설치하게 되면 위과 같이 상단 bar에 <code>Todo</code>라는 탭이 하나 더 추가됩니다.<br><img src="/images/zenhub_todo.png" alt=""><br>TODO를 관리할 수 있도록 플러그인을 제공해주고 있습니다. 물론 다른 Todo 전용 애플리케이션보다는 기능이 미약합니다.</p>
<h4 id="기타-부가적인-기능"><a href="#기타-부가적인-기능" class="headerlink" title="기타 부가적인 기능"></a>기타 부가적인 기능</h4><p>그리고 Zenhub에서는 Repository에서 다른 Respository로 손쉽게 이동할 수 있는 통로(?)를 제공해줍니다. Repository 이름 옆에 햄버거 버튼이 생성되는데요, 그 버튼을 통해서 계정에 존재하는 다른 Repository로 이동할 수 있습니다.<br><img src="/images/move_repository.png" alt=""><br>한 가지 또 부가적인 기능은 키보드 자판에서의 <code>b</code>버튼을 shotcut으로 제공해서 repository 화면에서 바로 <code>Board</code>탭으로 이동이 가능하네요:)</p>
<h3 id="가격"><a href="#가격" class="headerlink" title="가격"></a>가격</h3><p>공식 웹 사이트에는 5명 이하의 작은 팀에 대해서는 무료로 제공한다고 합니다. 물론 이것은 private repository에 대해서 적용되는 사항이구요, public repository에 대해서는 사용자 수에 상관없이 무료로 제공하고 있습니다.</p>
<h4 id="Github에서-제공하는-Project-기능과비교"><a href="#Github에서-제공하는-Project-기능과비교" class="headerlink" title="Github에서 제공하는 Project 기능과비교"></a>Github에서 제공하는 Project 기능과비교</h4><p><code>Zenhub</code>에서는 dashboard에서 <code>Issue</code>를 클릭하면 <strong>modal형태로</strong> 해당 Issue의 내용이 보이면서 바로 comment를 달거나 <code>Label</code>을 변경하는 등의 작업을 수행할 수 있는 기능을 제공합니다. 그러나 Github에서 제공하는 <code>Project dashboard</code>는 Issue를 클릭하면 해당 Issue 페이지로 redirect되어 (개인적으로는 매우)불편합니다.</p>
<p>또한 <code>Zenhub</code>을 사용하면 Issue의 특성에 따라서 필터를 적용할 수 있습니다. dashboard에 흩어져 있는 Issue들을 <code>Milestone</code>에 따라서 또는 <code>Label</code>에 따라서 등등의 특성으로 분류가 가능합니다. 아직 Github에서 default로 제공하는 Project 기능은 부족한 점이 많아 보입니다 :(</p>
<p><a href="https://www.zenhub.com/product" target="_blank" rel="external">Zenhub 공식 사이트</a>에서 보다 자세한 내용을 확인하실 수 있습니다.</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><br></h2><h2 id="그-외-Management-Tools"><a href="#그-외-Management-Tools" class="headerlink" title="그 외 Management Tools"></a>그 외 Management Tools</h2><h3 id="Hueboard"><a href="#Hueboard" class="headerlink" title="Hueboard"></a>Hueboard</h3><p><a href="https://huboard.com/huboard/huboard" target="_blank" rel="external">Hueboard 예시</a><br><code>Zenhub</code>과 마찬가지로 하나의 Repository마다, 하나의 dashboard를 제공해주며 기존의 dashboard 형식을 취합니다. UI적으로는 <code>Zenhub</code>보다 조금 나아보입니다. <code>Zenhub</code>과는 달리 별도의 웹 사이트로 redirect되면서 프로젝트 관리에 대한 총체적인 dashboard를 제공합니다. Filter 기능이 유독 눈에 들어오네요. <code>Zenhub</code>에서도 가능했던 기능이지만 UI적으로 깔끔해서 dashboard에 집중할 수가 있을 것 같습니다.<br><a href="https://huboard.com/" target="_blank" rel="external">Hueboard 공식 사이트</a>에서 보다 자세한 내용을 확인하실 수 있습니다.</p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a><br></h2><h3 id="Zube"><a href="#Zube" class="headerlink" title="Zube"></a>Zube</h3><p><img src="/images/zube_feature.png" alt=""><br>기존의 dashboard 외에 몇 가지 추가적인 기능을 제공합니다. <code>Sprint board</code>, <code>Sprint</code>, <code>Tickets</code> 눈에 들어오는 것은 <code>Analytics</code> 기능입니다.<br><img src="/images/zube_analysis.png" alt=""><br><code>Zenhub</code>에서 제공하는 보고서 유형보다 2종류가 더 많네요. 프로젝트를 처음 시작할 때부터 도입하지 않으면 사용하기에 부담이 생기는 Tool일 것 같다는 생각이 들었습니다. 또한 너무 많은 기능을 제공하면 오히려 생산성을 저해하는 요소가 될 수 있지 않을까 생각이 드는 Tool이었습니다.</p>
<p><a href="https://zube.io/" target="_blank" rel="external">Zube 공식 사이트</a>에서 보다 자세한 내용을 확인하실 수 있습니다.</p>
<p><br></p>
<h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>이 외에도 <code>Waffle</code>, <code>CodeTree</code>, <code>Asana</code> 등등 정말 많은 Tool들이 존재합니다. 제공하는 기능은 조금씩만 다르고 다 거기서 거기인 것 같습니다. 기존에 사용했던 다른 도구들(예를 들면 <code>Slack</code>, <code>Trello</code>, <code>hipchat</code> 등)과 얼마나 통합이 잘 되는지 또한 중요한 쟁점이 될 것 같습니다.</p>
<p>또 프로젝트에서 사용하는 Tool이 많아질수록 본래 프로젝트를 관리하기 위해 도입했던 관리 Tool을 관리해야 하는 주객전도 현상이 발생할 수 있습니다. 이 부분 또한 인지하여 프로젝트 관리 도구를 도입해야할 것입니다.</p>
<p>저는 개인적으로 새로운 Tool이 도입되는 부담감이 가장 적고 기존의 Github에 가장 잘 녹아드는 <code>Zenhub</code>이 가장 잘 맞는 것 같습니다:)</p>
<p><em>여러분 팀에 맞는 프로젝트 관리 도구는 무엇인가요?</em><br>감사합니다 :)</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/30/issue-management-tool/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/30/issue-management-tool/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/23/TS-1-Basic-Types/">
                            [TS] 1. Basic Types
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-23T16:12:08+09:00">
	
		    Apr 23, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/TypeScript/">TypeScript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/typescript.png" alt=""></p>
<h1 id="TS-1-Basic-Types"><a href="#TS-1-Basic-Types" class="headerlink" title="[TS] 1. Basic Types"></a>[TS] 1. Basic Types</h1><p>TypeScript에서는 JavaScript에서 사용했었던 <code>number</code>, <code>string</code>, <code>boolean</code>과 같은 데이터 타입을 기반으로 <code>정적 타이핑</code>을 지원합니다.</p>
<p>본격적인 TypeScript Tutorial 진행을 위해 에디터에 <code>TSLint</code>를 설치하겠습니다. (TypeScript에서 제공하는 <a href="https://www.typescriptlang.org/play/index.html" target="_blank" rel="external">Playground</a>에서 해보실 수도 있습니다.)</p>
<h2 id="Install-TSLint"><a href="#Install-TSLint" class="headerlink" title="Install TSLint"></a>Install TSLint</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yarn global add tslint typescript</div><div class="line">yarn global tslint typescript</div></pre></td></tr></table></figure>
<p><code>typescript</code>패키지는 <code>TSLint</code>와 동일한 version을 사용해야 하기 때문에 <code>peerDependencies</code>로 설치해줍니다.<br>작업할 디렉토리로 이동하여 <code>tslint</code>를 설정해줍니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tslint --init</div></pre></td></tr></table></figure></p>
<p>위 명령어를 실행하게 되면 <code>tslint.json</code>이라는 파일이 생성됩니다.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"defaultSeverity"</span>: <span class="string">"error"</span>,</div><div class="line">    <span class="attr">"extends"</span>: <span class="string">"tslint:recommended"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>기본적으로 <code>tslint</code>에서 제공하는 <code>recommended</code> rule을 적용했습니다. 저는 <code>WebStorm</code>이라는 에디터를 사용하고 있습니다. 각자 사용하는 에디터에서 환경설정을 통해 TSLint를 able로 설정해주시면 됩니다. TSLint에서 제공하고 있는 rule은 <a href="http://palantir.github.io/tslint/rules/" target="_blank" rel="external">공식 사이트</a>에서 제공하고 있습니다. 입맛에 맞게 해당 rule들을 오버라이딩하여 사용하실 수 있습니다. (<code>WebStorm</code>에서는 console찍는 것 가지고 뭐라 안하는데, 다른 editor에서는 console마저 지우라고 하는 것 같습니다. <code>no-console</code> rule을 설정하시는게 정신 건강에 좋을 것 같습니다.) 보다 자세한 <code>tslint.json</code> 설정은 다음 링크를 참고하시면 좋을 것 같습니다. MicroSoft가 만든 <code>VSCode</code> 에디터가 요즘 뜨고 있는데요, <code>VSCode</code> 에디터에 TypeScript 개발 환경 설정하는 내용을 포함하고 있습니다. <a href="http://poiemaweb.com/typescript-vscode" target="_blank" rel="external">Visual Studio Code에서의 TypeScript 개발 환경 구축</a></p>
<h2 id="Basic-Types"><a href="#Basic-Types" class="headerlink" title="Basic Types"></a>Basic Types</h2><p>변수에 타입을 지정해주기 위해서 TypeScript에서는 <code>:</code>을 통해 지원합니다. 기존의 JavaScript에서 변수를 선언하면서 <code>:</code>으로 해당 변수의 타입을 지정해줍니다.</p>
<h3 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> isExist: <span class="built_in">boolean</span> = <span class="literal">false</span>;</div></pre></td></tr></table></figure>
<p><code>boolean</code> 타입을 지정합니다.</p>
<h3 id="Number-숫자"><a href="#Number-숫자" class="headerlink" title="Number, 숫자"></a>Number, 숫자</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> decimal: <span class="built_in">number</span> = <span class="number">6</span>;</div><div class="line"><span class="keyword">let</span> hex: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</div><div class="line"><span class="keyword">let</span> binary: <span class="built_in">number</span> = <span class="number">0b1010</span>;</div><div class="line"><span class="keyword">let</span> octal: <span class="built_in">number</span> = <span class="number">0o744</span>;</div></pre></td></tr></table></figure>
<p><code>number</code> 타입을 지정합니다.</p>
<h3 id="String-문자열"><a href="#String-문자열" class="headerlink" title="String, 문자열"></a>String, 문자열</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> name: <span class="built_in">string</span> = <span class="string">"jbee"</span>;</div><div class="line"><span class="keyword">let</span> greeting: <span class="built_in">string</span> = <span class="string">`Hi, I'm <span class="subst">$&#123;name&#125;</span>!`</span>;</div></pre></td></tr></table></figure>
<p><code>string</code> 타입을 지정합니다.</p>
<h3 id="Array-배열"><a href="#Array-배열" class="headerlink" title="Array, 배열"></a>Array, 배열</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div></pre></td></tr></table></figure>
<p>or<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div></pre></td></tr></table></figure></p>
<p>기존에 배열 리터럴을 사용하여 배열을 정의하면서 정의하는 배열에 어떠한 데이터 타입의 원소가 들어갈 것인지를 Type을 통해 제공할 수 있습니다.</p>
<h3 id="Tuple-튜플"><a href="#Tuple-튜플" class="headerlink" title="Tuple, 튜플"></a>Tuple, 튜플</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let tuple: [string, number];</div><div class="line">tuple = ["age", 25];</div><div class="line">tuple = ["name", "jbee];// Error</div><div class="line">&gt; message: 'Type '[string, string]' is not assignable to type '[string, number]'.</div><div class="line">  Type 'string' is not assignable to type 'number'.' at: '5,1'</div></pre></td></tr></table></figure>
<p><code>key-value</code>의 형태를 저장할 때는, 위와 같이 타입을 지정해줄 수 있습니다. TSLint가 잘못된 타입의 값이 들어왔다는 것을 error message로 알려줍니다.</p>
<h3 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">enum</span> Color &#123;Red, Green, Blue&#125;;</div><div class="line"><span class="keyword">let</span> c: Color = Color.Green;</div></pre></td></tr></table></figure>
<p>마찬가지로 Java의 <code>enum</code>과 같은 구조를 갖습니다. 시작하는 멤버에 0부터 번호를 매기고, 만약 1부터 시작해야 한다면 임의적으로 시작하는 숫자를 지정할 수 있습니다. 또는 각각에게 번호를 지정할 수도 있습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">enum</span> Subject &#123;<span class="built_in">Math</span> = <span class="number">1</span>, Science = <span class="number">3</span>, History = <span class="number">7</span>&#125;</div><div class="line"><span class="built_in">console</span>.log(Subject[<span class="number">3</span>]);<span class="comment">//Science</span></div></pre></td></tr></table></figure></p>
<p>지정한 번호로 호출도 가능합니다.</p>
<p><code>tsc</code> 명령어를 통해서 저희가 작성한 TypeScript 코드를 변환된 Javascript 코드로 볼 수 있습니다. TypeScript의 <code>Enum</code>은 다음과 같이 변환되는 것을 확인하실 수 있습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Subject;</div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Subject</span>) </span>&#123;</div><div class="line">    Subject[Subject[<span class="string">"Math"</span>] = <span class="number">1</span>] = <span class="string">"Math"</span>;</div><div class="line">    Subject[Subject[<span class="string">"Science"</span>] = <span class="number">3</span>] = <span class="string">"Science"</span>;</div><div class="line">    Subject[Subject[<span class="string">"History"</span>] = <span class="number">7</span>] = <span class="string">"History"</span>;</div><div class="line">&#125;)(Subject || (Subject = &#123;&#125;));</div></pre></td></tr></table></figure></p>
<p>자바스크립트의 다섯 줄이 타입스크립트 한 줄로 작성되었습니다 :)</p>
<h3 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h3><p>코드를 작성하면서 사용되는 변수에 알맞은 데이터 타입을 설정하는 것은 중요하지만 데이터 타입이 동적으로 결정되는 변수도 존재하게 됩니다. 이럴 때 사용할 수 있는 타입이 <code>any</code>입니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> notSureVar: <span class="built_in">any</span>;</div><div class="line">notSureVar = <span class="number">3</span>;</div><div class="line">notSureVar = <span class="string">`hi`</span>;</div><div class="line">notSureVar = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div></pre></td></tr></table></figure></p>
<p><code>any</code>로 타입을 지정하면 Compile Time에서 <code>Type checking</code>을 하지 않습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> notSureVar; <span class="comment">// == let notSureVar: any;</span></div></pre></td></tr></table></figure></p>
<p><code>any</code>로 타입을 지정하는 것과 위의 자바스크립트는 동치라고 볼 수 있습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr: <span class="built_in">any</span>[] = [<span class="number">1</span>, <span class="string">`jbee`</span>, <span class="literal">true</span>];</div></pre></td></tr></table></figure></p>
<p>여러 가지 타입의 요소가 포함되는 배열을 정의할 때도 <code>any</code>를 사용할 수 있습니다.<br><code>any</code>의 역할이 다른 언어에서의 <code>Object</code>와 같은 역할을 하는 느낌이 드는데요, 실제로 2.2version에서 <code>Object</code>타입이 추가되었습니다. 일단 코드를 통해 확인해보겠습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> user = &#123;</div><div class="line">    getName() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`hi`</span>);</div><div class="line">    &#125;,</div><div class="line">    name : <span class="string">"jbee"</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> notSureObj: <span class="built_in">Object</span>;</div><div class="line">notSureObj = user;</div><div class="line">notSureObj.getName(); <span class="comment">// error</span></div><div class="line">notSureObj.name; <span class="comment">// error</span></div><div class="line"><span class="comment">//Property 'getName' does not exist on type 'Ojbect'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> notSureVar: <span class="built_in">any</span>;</div><div class="line">notSureVar = user;</div><div class="line">notSureVar.getName(); <span class="comment">// success</span></div><div class="line">notSureVar.name; <span class="comment">// "jbee"</span></div></pre></td></tr></table></figure></p>
<p>변수의 type을 <code>Object</code>로 지정하고, 실제 Object를 정의하여 변수에 할당했습니다. 그리고 할당한 Ojbect에 존재하는 메소드를 호출했더니 에러가 발생합니다. <code>getName()</code>이라는 프로퍼티가 없다고 하네요. 분명 <code>getName()</code>메소드가 존재하는 Object를 할당했는데 말이죠. <code>name</code> 프로퍼티도 마찬가지입니다. 하지만 <code>any</code> 타입으로 지정했을 때는 메소드를 호출할 수 있고, 프로퍼티를 찾을 수 있습니다. 이 <code>Object</code> 타입은 할당만 가능할 뿐, 메소드나 프로퍼티에 접근할 수 없습니다.<br><a href="https://blog.mariusschulz.com/2017/02/24/typescript-2-2-the-object-type" target="_blank" rel="external">About Object Type</a></p>
<h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h3><p>값을 반환하지 않는 함수의 return type을 지정할 때 사용할 수 있습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeting</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`hi`</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>물론 변수의 타입에도 사용할 수 있습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> foo: <span class="built_in">void</span>;</div><div class="line">foo = <span class="literal">undefined</span>;</div><div class="line">foo = <span class="literal">null</span>;</div><div class="line">foo = <span class="string">`foo`</span>; <span class="comment">//error</span></div><div class="line">&gt; Type <span class="string">'string'</span> is not assignable to <span class="keyword">type</span> <span class="string">'void'</span></div></pre></td></tr></table></figure></p>
<p>하지만 <code>void</code>로 선언된 변수에는 <code>undefined</code>와 <code>null</code> 값만 할당할 수 있습니다.</p>
<h3 id="Null-Undefined"><a href="#Null-Undefined" class="headerlink" title="Null, Undefined"></a>Null, Undefined</h3><p>기본적으로 <code>null</code>과 <code>undefined</code>는 모든 타입들의 서브타입이라고 할 수 있습니다. 즉 다른 타입으로 지정된 변수에도 <code>null</code>과 <code>undefined</code>를 할당할 수 있습니다.</p>
<blockquote>
<p><code>--strictNullChecks</code> flag를 사용하게 되면 <code>null</code>과 <code>undefined</code>는 <code>void</code>타입의 변수에만 할당할 수 있습니다. TypeScript에서는 해당 flag사용을 권장하고 있습니다.</p>
</blockquote>
<h3 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h3><p><code>never</code> 타입은 발생하지 않는 경우에 대한 타입을 대표하는 타입입니다. 코드를 통해 살펴보겠습니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Function returning never must have unreachable end point</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Inferred return type is never</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> error(<span class="string">"Something failed"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Function returning never must have unreachable end point</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">infiniteLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>위의 예제와 같이 <code>throw</code>를 하거나 error를 발생시키는 function의 return type으로 설정합니다.<br><a href="https://blog.mariusschulz.com/2016/11/18/typescript-2-0-the-never-type" target="_blank" rel="external">About Never Type</a></p>
<h3 id="Type-Assertions"><a href="#Type-Assertions" class="headerlink" title="Type Assertions"></a>Type Assertions</h3><p>타입 어설션이란 개발자가 타입스크립트에게 “내가 무슨 짓을 하고 있는지 아니까, 나를 믿어줘!”하고 메세지를 보내는 것입니다. 주로 엔티티의 타입을 보다 구체적으로 설정할 때 사용합니다.<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> greet: <span class="built_in">any</span> = <span class="string">`Hello!`</span>;</div><div class="line"><span class="keyword">let</span> lengthOfGreet: <span class="built_in">number</span>;</div><div class="line">lengthOfGreet = greet.length;</div><div class="line">lengthOfGreet = (&lt;<span class="built_in">string</span>&gt; greet).length;</div><div class="line">lengthOfGreet = (greet <span class="keyword">as</span> <span class="built_in">string</span>).length;</div></pre></td></tr></table></figure></p>
<p><code>any</code>타입에 대해서 <code>형변환(type casting)</code>하는 것처럼 보이지만 실제로는 특별한 검사나 데이터 재구성을 하지 않습니다. 이 타입 어설션은 컴파일 타임에만 영향을 미칠뿐 런타임시에는 아무런 영향을 주지 않습니다. 보다 데이터 타입을 구체화 시킬 때 사용합니다.<br><code>&lt;&gt;</code>를 사용하는 방법과 <code>as</code>를 사용하는 두 가지 방법이 존재합니다. 선호도에 따라 어떻게 사용할지 결정할 수 있지만 <code>JSX</code>와 함께 사용하는 경우에는 <code>as</code>를 사용하는 방법만 허용됩니다.</p>
<p>감사합니다 :)</p>
<p><em>1. Basic Type end</em></p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="external">TypeScript Official Document - Basic Types</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/23/TS-1-Basic-Types/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/23/TS-1-Basic-Types/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/23/BDD-3-chai-http/">
                            [TDD] 3. Chai-http 사용하여 REST API Test하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-23T16:07:57+09:00">
	
		    Apr 23, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Tool/">Tool</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/tool_chai.png" alt=""></p>
<h1 id="TDD-3-Chai-http-사용하여-REST-API-Test하기"><a href="#TDD-3-Chai-http-사용하여-REST-API-Test하기" class="headerlink" title="[TDD] 3. Chai-http 사용하여 REST API Test하기"></a>[TDD] 3. Chai-http 사용하여 REST API Test하기</h1><p><a href="https://jaeyeophan.github.io/2017/04/23/BDD-1-mocha/">&gt;Mocha - Getting started&gt;</a><br><br><a href="https://jaeyeophan.github.io/2017/04/23/BDD-2-chai/">&gt;Chai - Getting started&gt;</a></p>
<p>이번 포스팅에서는 <code>chai-http</code>라는 module을 사용해서 REST API를 테스트하는 코드를 작성해보겠습니다.</p>
<p>테스트에 집중하기 위해 요청을 받을 서버는 <code>json-server</code>라는 모듈을 사용하여 구축하겠습니다. <code>json</code>형태로 데이터를 생성하고 요청을 받을 수 있는 임시 서버입니다. 데이터베이스를 따로 구축하지 않아도 <code>CRUD</code>와 같은 기본적인 API를 제공해주는 모듈입니다. 포스팅에서 다루는 내용보다 더 자세한 내용은 해당 <a href="https://github.com/typicode/json-server" target="_blank" rel="external">링크</a>를 참조하시면 되겠습니다.</p>
<h2 id="테스트-환경-구축하기"><a href="#테스트-환경-구축하기" class="headerlink" title="테스트 환경 구축하기"></a>테스트 환경 구축하기</h2><p>우선 <code>chai-http</code>를 설치합니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn add chai-http</div></pre></td></tr></table></figure></p>
<p>그리고 서버로 사용할 <code>json-server</code>를 설치합니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn global add json-server</div></pre></td></tr></table></figure></p>
<p>그런 다음 <code>src</code> 디렉토리(작업하고자 하는 디렉토리)로 이동하여 다음 명령어를 실행해줍니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ json-server --watch db.json</div></pre></td></tr></table></figure></p>
<p>위 명령어를 실행하게 되면 <code>db.json</code> 파일을 생성하게 되고 해당 <code>.json</code>파일에 기본적인 데이터가 들어가있습니다. <code>json-server</code>는 기본적으로 <code>3000</code>번 포트를 사용합니다. <a href="http://localhost:3000/" target="_blank" rel="external">localhost:3000</a>에 접속해보면 어떠한 데이터가 들어가있는지를 간단한 웹 페이지를 통해서도 확인하실 수 있습니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">\&#123;^_^&#125;/ hi!</div><div class="line"></div><div class="line">Loading db.json</div><div class="line">Done</div></pre></td></tr></table></figure></p>
<p>console에는 귀여운 이모티콘이 환영을 해주네요 :)</p>
<p>보다 customized한 서버를 사용하시고 싶은 경우에는 다음과 같은 <code>.js</code>파일을 만들어 사용하실 수 있습니다.<br><figure class="highlight javascript"><figcaption><span>server.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> jsonServer = <span class="built_in">require</span>(<span class="string">'json-server'</span>);</div><div class="line"><span class="keyword">const</span> server = jsonServer.create();</div><div class="line"><span class="keyword">const</span> router = jsonServer.router(<span class="string">'db.json'</span>);</div><div class="line"><span class="keyword">const</span> middlewares = jsonServer.defaults();</div><div class="line"></div><div class="line">server.use(middlewares);</div><div class="line">server.use(router);</div><div class="line">server.listen(<span class="number">3000</span>, () =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'JSON Server is running'</span>)</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>위 파일은 <code>node server.js</code> 명령어로 실행하실 수 있습니다 :) 이번 포스팅에서는 default로 생성되는 임시 서버를 사용하겠습니다.</p>
<h2 id="test-파일-작성"><a href="#test-파일-작성" class="headerlink" title=".test 파일 작성"></a>.test 파일 작성</h2><p>이제 테스트 코드를 작성할 <code>.test</code>파일을 만들어 보겠습니다.<br><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> chai = <span class="built_in">require</span>(<span class="string">'chai'</span>);</div><div class="line"><span class="keyword">const</span> chaiHttp = <span class="built_in">require</span>(<span class="string">'chai-http'</span>);</div><div class="line"><span class="keyword">const</span> expect = chai.expect;</div><div class="line">chai.use(chaiHttp);</div><div class="line"></div><div class="line"><span class="keyword">const</span> url = <span class="string">'http://localhost:3000'</span>;</div></pre></td></tr></table></figure></p>
<p>이전에 설치한 <code>chai</code>와 테스트 환경을 구축할 때 설치한 <code>chai-http</code>를 불러옵니다. 그리고 <code>chai</code>가 <code>chai-http</code>를 <code>use</code>합니다. 이전 포스팅에서 소개해드렸던 <code>expect</code>를 사용하기 위해 준비합니다. 마지막으로 요청을 보낼 서버의 api에서 반복될 url을 상수로 할당해줬습니다.</p>
<h2 id="Request-TEST"><a href="#Request-TEST" class="headerlink" title="Request TEST"></a>Request TEST</h2><p>본격적인 테스트 코드를 작성할 시간입니다. 우선 server에 요청이 제대로 가는지 확인해보겠습니다.<br><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'Request test'</span>, () =&gt; &#123;</div><div class="line">    it(<span class="string">'request to server'</span>, done =&gt; &#123;</div><div class="line">        chai.request(url)</div><div class="line">            .get(<span class="string">'/'</span>)</div><div class="line">            .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">                expect(err).to.be.null;</div><div class="line">                expect(res).to.have.status(<span class="number">200</span>);</div><div class="line">                done();</div><div class="line">            &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>위 코드는 <code>http://localhost:3000/</code>에 대한 <code>GET</code> 요청이 제대로 동작하는지 테스트하는 코드입니다.<br>해당 <code>url</code>로 <code>request</code>를 보내고 <code>get</code> 방식으로 그 요청을 보냅니다. 요청에 대한 응답을 <code>.end()</code>메소드로 받을 수 있습니다. 이 <code>end()</code> 메소드에는 요청에 대한 응답으로 <code>err</code>와 <code>res</code>를 파라미터로 받는 콜백 함수를 넘겨줍니다.<br>콜백 함수에서는 에러(<code>err</code>)는 <code>null</code>값이어야 하고, http status code는 <code>200</code>이어야 한다는 내용을 담고 있습니다. 모든 조건이 만족되면 <code>done()</code> 함수가 호출되면서 test가 pass하게 됩니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<p>위 명령어로 test를 실행해보겠습니다. 방금 전 <code>json-server</code>를 running한 터미널 창이 아닌 다른 터미널 창에서 실행하셔야 합니다. 요청을 받으러면 서버가 running 중이어야 하니까요 :)<br><figure class="highlight bash"><figcaption><span>test terminal</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">REST <span class="built_in">test</span></div><div class="line">  ✓ request to server</div><div class="line"></div><div class="line">1 passing (13ms)</div></pre></td></tr></table></figure></p>
<p>해당 테스트가 잘 pass한 것을 확인하실 수 있습니다.<br><figure class="highlight bash"><figcaption><span>json-server terminal</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GET / 200 2.318 ms - -</div></pre></td></tr></table></figure></p>
<p>그리고 아까 <code>json-server --watch db.json</code> 명령어를 실행한 console에서는 GET요청에 대한 로그를 남깁니다.</p>
<h2 id="CRUD-TEST"><a href="#CRUD-TEST" class="headerlink" title="CRUD TEST"></a>CRUD TEST</h2><h3 id="Data-Modeling"><a href="#Data-Modeling" class="headerlink" title="Data Modeling"></a>Data Modeling</h3><p>테스트를 위해 <code>db.json</code>에 간단한 데이터를 넣어보겠습니다. 다음과 비슷한 형식으로 바꿔줍니다.<br><figure class="highlight json"><figcaption><span>db.json</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"users"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"id"</span>: <span class="number">1</span>,</div><div class="line">      <span class="attr">"name"</span>: <span class="string">"Jbee"</span>,</div><div class="line">      <span class="attr">"age"</span>: <span class="number">25</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"id"</span>: <span class="number">2</span>,</div><div class="line">      <span class="attr">"name"</span>: <span class="string">"foo"</span>,</div><div class="line">      <span class="attr">"age"</span>: <span class="number">20</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"id"</span>: <span class="number">3</span>,</div><div class="line">      <span class="attr">"name"</span>: <span class="string">"bar"</span>,</div><div class="line">      <span class="attr">"age"</span>: <span class="number">30</span></div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>users</code>라는 배열을 지정해줬습니다. 배열의 요소에는 <code>name</code>과 <code>age</code>를 갖고 있는 <code>json</code>형식의 데이터를 넣어줬습니다. 저장을 하면 <code>--watch</code>옵션을 붙여 실행했기 때문에 변경된 데이터 사항이 자동으로 반영됩니다. <code>localhost:3000</code>의 웹 페이지도 새로고침을 해보면 새로운 데이터가 들어가있는 것을 확인하실 수 있습니다. 이 데이터에는 <code>/users</code>라는 api로 접근이 가능합니다.</p>
<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p><code>db.json</code>파일에 추가한 <code>users</code>데이터를 가져와 봅시다.<br><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'GET'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'fetch all users'</span>, done =&gt; &#123;</div><div class="line">    chai.request(url)</div><div class="line">        .get(<span class="string">'/users'</span>)</div><div class="line">        .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">            expect(err).to.be.not.ok;</div><div class="line">            expect(res).to.have.status(<span class="number">200</span>);</div><div class="line">            expect(res.body).to.be.an(<span class="string">'array'</span>);</div><div class="line">            done();</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>이전의 코드와 매우 유사합니다. <code>res.body</code>에 대한 값을 확인하는 코드가 추가되었습니다. array 형식의 데이터라면 test를 pass시키도록 테스트 코드를 작성했습니다. test가 잘 통과하네요 :)<br>특정 <code>user</code>에 대한 값만 가져오려면 어떻게 해야 할까요?<br><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">it(<span class="string">'fetch one user'</span>, done =&gt; &#123;</div><div class="line">  chai.request(url)</div><div class="line">      .get(<span class="string">'/users'</span>)</div><div class="line">      .query(&#123;<span class="attr">id</span>: <span class="number">1</span>&#125;)</div><div class="line">      .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">          expect(err).to.be.null;</div><div class="line">          expect(res).to.have.status(<span class="number">200</span>);</div><div class="line">          expect(res.body[<span class="number">0</span>]).to.deep.equal(</div><div class="line">              &#123;</div><div class="line">                  <span class="attr">id</span>: <span class="number">1</span>,</div><div class="line">                  <span class="attr">name</span>: <span class="string">"Jbee"</span>,</div><div class="line">                  <span class="attr">age</span>: <span class="number">25</span></div><div class="line">              &#125;</div><div class="line">          );</div><div class="line">          done();</div><div class="line">      &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>위 예제 코드를 describe 콜백 함수 안에 추가해줍니다. 와 같이 <code>.query()</code>에 해당하는 조건을 넘겨줄 수 있습니다. 응답으로 오는 데이터가 명시한 값과 일치하는지를 테스트 코드로 작성해줬습니다.</p>
<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'POST'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'add user'</span>, done =&gt; &#123;</div><div class="line">    chai.request(url)</div><div class="line">        .post(<span class="string">'/users'</span>)</div><div class="line">        .send(&#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">'react'</span>, <span class="attr">age</span>: <span class="number">3</span>&#125;)</div><div class="line">        .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">            expect(err).to.be.not.ok;</div><div class="line">            expect(res).to.have.status(<span class="number">201</span>);</div><div class="line">            user = res.body;</div><div class="line">            done();</div><div class="line">        &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>post()</code>메소드와 <code>send()</code> 메소드를 통해 테스트를 진행할 수 있습니다.</p>
<h3 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h3><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'PATCH'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'update user'</span>, done =&gt; &#123;</div><div class="line">    chai.request(url)</div><div class="line">        .patch(<span class="string">'/users/2'</span>)</div><div class="line">        .send(&#123;<span class="attr">name</span>: <span class="string">'angular'</span>, <span class="attr">age</span>: <span class="number">1</span>&#125;)</div><div class="line">        .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">            expect(err).to.be.not.ok;</div><div class="line">            expect(res).to.have.status(<span class="number">200</span>);</div><div class="line">            done();</div><div class="line">        &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>patch()</code>메소드와 <code>send()</code> 메소드를 통해 테스트를 진행할 수 있습니다.</p>
<h3 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h3><figure class="highlight javascript"><figcaption><span>rest.test.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'DELETE'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'delete user'</span>, done =&gt; &#123;</div><div class="line">    chai.request(url)</div><div class="line">        .delete(<span class="string">'/users/4'</span>)</div><div class="line">        .end(<span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</div><div class="line">            expect(err).to.be.not.ok;</div><div class="line">            expect(res).to.have.status(<span class="number">200</span>);</div><div class="line">            done();</div><div class="line">        &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>delete()</code>메소드를 통해 테스트를 진행할 수 있습니다.</p>
<p>예제로 사용된 코드는 <a href="https://github.com/JaeYeopHan/javascript_test_tutorial" target="_blank" rel="external">Github Respository</a>에서 확인하실 수 있습니다.</p>
<p><em>[TDD] 3. end</em></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/23/BDD-3-chai-http/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/23/BDD-3-chai-http/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/23/BDD-2-chai/">
                            [TDD] 2. Chai - Getting started
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-23T16:07:45+09:00">
	
		    Apr 23, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Tool/">Tool</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/tool_chai.png" alt=""></p>
<h1 id="TDD-2-Chai-Getting-started"><a href="#TDD-2-Chai-Getting-started" class="headerlink" title="[TDD] 2. Chai - Getting started"></a>[TDD] 2. Chai - Getting started</h1><p><a href="https://jaeyeophan.github.io/2017/04/23/BDD-1-mocha/">&gt;Mocha - Getting started&gt;</a></p>
<p>이전 포스팅에서 <code>Mocha</code>를 사용한 테스트를 진행해봤습니다. 이전 포스팅의 예제 코드에 Assertion Library인 <code>Chai</code>를 추가해보겠습니다.</p>
<p><code>Chai</code>는 세 가지 style의 <code>Assertion</code>을 제공합니다.</p>
<ul>
<li>assert<br>기본적으로 node에서 제공하는 <code>Assert</code>라이브러리와 유사합니다.<br></li>
<li>expect<br><code>BDD</code> 스타일로 제공되는 인터페이스 중 하나로 공식 문서에서는 <code>natural longuage</code>처럼 <code>chaining</code>을 제공하여 코드를 작성할 수 있게 해준다고 합니다. 잠시 후 예제 코드로 살펴보겠습니다.<br></li>
<li>should<br><code>BDD</code> 스타일로 제공되는 인터페이스 중 나머지 하나로 <code>expect</code> 인터페이스와 마찬가지로 <code>chainging</code>을 통한 API를 제공합니다.<br></li>
</ul>
<p>라이브러리에 대한 보다 구체적인 내용은 공식 문서를 참조하시면 되겠습니다. <a href="http://chaijs.com/guide/styles/" target="_blank" rel="external">&gt;Chai Documents&gt;</a></p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>우선, <code>Chai</code>를 설치해줍니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yarn global add chai</div></pre></td></tr></table></figure>
<p>이전에 작성했던 <code>/test/operator.test.js</code> 코드에서 <code>Chai</code>를 불러옵니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> chai = <span class="built_in">require</span>(<span class="string">'chai'</span>);</div><div class="line"><span class="keyword">const</span> expect = chai.expect;</div><div class="line"><span class="keyword">const</span> should = chai.should();</div></pre></td></tr></table></figure>
<p><code>expect</code>와 <code>should</code>가 불러오는 방식이 약간 다릅니다. <code>expect</code> 인터페이스는 assertion을 제공하는 시작점으로 함수를 제공합니다. <code>should</code> 인터페이스는 <code>Object.prototype</code>을 확장하여 단일 Getter를 제공하고 그것을 시작점으로 제공합니다.</p>
<p><code>expect</code> 인터페이스를 통해 지저분했던 <code>if</code> 구문을 제거해봅시다!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'sum 함수 테스트'</span>, () =&gt; &#123;</div><div class="line">    it (<span class="string">'10과 20를 넘기면 30이 나와야 한다'</span>, done =&gt; &#123;</div><div class="line">        <span class="keyword">let</span> result = sum(<span class="number">10</span>, <span class="number">20</span>);</div><div class="line">        expect(result).to.equal(<span class="number">30</span>);</div><div class="line">        done();</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>첫번째로 등장한 api, <code>equal</code>입니다! <code>equal()</code>메소드에는 파라미터르 기대값이 들어가게 됩니다. 테스트 하고자 하는 함수의 반환 값이 기대값과 다르게 되면 그에 해당하는 error message가 나타납니다. 30을 40으로 바꾸고 실행해보겠습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">sum 함수 테스트</div><div class="line">    1) 10과 20를 넘기면 30이 나와야 한다</div><div class="line"></div><div class="line">  0 passing (6ms)</div><div class="line">  1 failing</div><div class="line"></div><div class="line">  1) sum 함수 테스트 10과 20를 넘기면 30이 나와야 한다:</div><div class="line"></div><div class="line">      AssertionError: expected 30 to equal 40</div><div class="line">      + expected - actual</div><div class="line"></div><div class="line">      -30</div><div class="line">      +40</div><div class="line"></div><div class="line">      at Context.done (<span class="built_in">test</span>/operator.test.js:37:27)</div></pre></td></tr></table></figure>
<p>정말 친절한 <code>log</code>가 출력되는 것을 확인할 수 있습니다. describe에 기술했던 section 이름이 제일 먼저 출력되고, 테스트를 실행한 단위 테스트의 이름이 출력됩니다. 그리고 통과한 단위 테스트와 실패한 단위 테스트에 대한 정보가 나타납니다. 기대값과 실제 반환값과의 차이를 보여주며 어느 부분에서 에러가 발생했는지까지 출력됩니다 :)</p>
<h2 id="Expect-API"><a href="#Expect-API" class="headerlink" title="Expect API"></a>Expect API</h2><p><a href="http://chaijs.com/api/bdd/" target="_blank" rel="external">BDD style, Expect API</a></p>
<h3 id="ok"><a href="#ok" class="headerlink" title=".ok"></a>.ok</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">expect(<span class="literal">false</span>).to.not.be.ok;</div><div class="line">expect(<span class="literal">undefined</span>).to.not.be.ok;</div><div class="line">expect(<span class="literal">null</span>).to.not.be.ok;</div></pre></td></tr></table></figure>
<p>넘겨받는 값이 <code>false</code>인지 <code>undefined</code>인지 <code>null</code>인지 한 번에 판단할 수 있는 API입니다. 위 예제 코드에서는 일단 테스트가 통과하는 상황을 만들기 위해 <code>not</code>을 붙였는데요, 실제 테스트 코드에서는 <code>not</code>을 제거하여 사용하면 값을 한 번에 판단할 수 있는 API가 됩니다. <code>boolean</code>에 대해서는 <code>.true</code>, <code>.falase</code>가 별도로 존재합니다. 그리고 배열이 <code>empty</code>인지를 판단하는 <code>.empty</code>도 별도로 존재합니다.</p>
<h3 id="deep"><a href="#deep" class="headerlink" title=".deep"></a>.deep</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">expect(foo).to.deep.equal(&#123; <span class="attr">bar</span>: <span class="string">'baz'</span> &#125;);</div><div class="line">expect(&#123; <span class="attr">foo</span>: &#123; <span class="attr">bar</span>: &#123; <span class="attr">baz</span>: <span class="string">'quux'</span> &#125; &#125; &#125;)</div><div class="line">  .to.have.deep.property(<span class="string">'foo.bar.baz'</span>, <span class="string">'quux'</span>);</div></pre></td></tr></table></figure>
<p>객체를 <code>equal</code>로 비교를 하기 위해서는 추가적으로 <code>deep</code> flag가 필요합니다.</p>
<h3 id="include-vs-have"><a href="#include-vs-have" class="headerlink" title=".include vs .have"></a>.include vs .have</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//.include vs .have</span></div><div class="line">expect([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]).to.include(<span class="number">2</span>);</div><div class="line"><span class="comment">// expect([1,2,3]).to.have(2); // error!</span></div><div class="line">expect([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]).to.have.property(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span> &#125;;</div><div class="line">expect(obj).to.include.property(<span class="string">'foo'</span>);</div><div class="line">expect(obj).to.have.property(<span class="string">'foo'</span>);</div><div class="line"></div><div class="line">expect(<span class="string">'foobar'</span>).to.include.string(<span class="string">'bar'</span>);</div><div class="line">expect(<span class="string">'foobar'</span>).to.have.string(<span class="string">'bar'</span>);</div></pre></td></tr></table></figure>
<p>(사실 두 API의 차이점을 잘 모르겠다.)</p>
<h3 id="사용하기"><a href="#사용하기" class="headerlink" title="사용하기"></a>사용하기</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deepCss = &#123; <span class="string">'.link'</span>: &#123; <span class="string">'[target]'</span>: <span class="number">42</span> &#125;&#125;;</div><div class="line">expect(deepCss).to.have.deep.property(<span class="string">'\\.link.\\[target\\]'</span>, <span class="number">42</span>);</div></pre></td></tr></table></figure>
<p><code>.</code>이나 <code>[</code>,<code>]</code>을 사용하기 위해서는 <code>\\</code>를 사용하여 표시할 수 있습니다.</p>
<p>제공되는 API 종류가 정말 많아서, 왠지 있을 것 같은 API는 <a href="http://chaijs.com/api/bdd/" target="_blank" rel="external">공식 문서</a>에서 찾아보면서 테스트 코드를 작성하면 되겠습니다.</p>
<p>예제로 사용된 코드는 <a href="https://github.com/JaeYeopHan/javascript_test_tutorial" target="_blank" rel="external">Github Respository</a>에서 확인하실 수 있습니다.</p>
<p><a href="https://jaeyeophan.github.io/2017/04/23/BDD-3-chai-http/">&gt;Chai-http를 사용하여 REST API test하기&gt;</a></p>
<p><em>[TDD] 2. end</em></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/23/BDD-2-chai/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/23/BDD-2-chai/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/23/BDD-1-mocha/">
                            [TDD] 1. Mocha - Getting started
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-23T16:07:34+09:00">
	
		    Apr 23, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Tool/">Tool</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/tool_mocha.png" alt=""></p>
<h1 id="TDD-1-Mocha-Getting-started"><a href="#TDD-1-Mocha-Getting-started" class="headerlink" title="[TDD] 1. Mocha - Getting started"></a>[TDD] 1. Mocha - Getting started</h1><p><code>Mocha</code>란 러너를 포함하고 있는 테스트 프레임워크로 사용자 수가 가장 많은 테스크 프레임워크입니다. <code>Mocha</code>는 자체적으로 assertion을 지원하지 않기 때문에 다른 <code>Assertion</code>라이브러리와 함께 사용해야 합니다. 기본적으로 node에서 제공하는 <code>assert</code>라이브러리가 존재하며 요즘에는 주로 <code>chai</code>라는 라이브러리와 함께 사용한다고 합니다. 라이브러리에 대한 내용은 공식 문서를 참조하시면 되겠습니다.<br><a href="http://mochajs.org/" target="_blank" rel="external">&gt;Mocha Documents</a></p>
<p>Mocha는 기본적으로 BDD 기반의 프레임워크입니다. 하지만 BDD와 TDD 두 종류의 인터페이스를 모두 제공하고 있습니다. 이번 포스팅에서는 BDD 기반의 예제를 살펴봅니다.<br><a href="http://joshldavis.com/2013/05/27/difference-between-tdd-and-bdd/" target="_blank" rel="external">TDD vs BDD</a></p>
<h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><ol>
<li><code>mocha</code>를 global로 설치해줍니다. <em>(cf <a href="http://jaeyeophan.github.io/2017/04/21/YARN-New-Package-Manger/">YARN, 새로운 Package Manager</a>)</em><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ yarn global add mocha</div><div class="line"><span class="comment">#success Installed "mocha@3.2.0" with binaries:</span></div><div class="line"><span class="comment">#      - mocha</span></div><div class="line"><span class="comment">#      - _mocha</span></div><div class="line"><span class="comment">#✨  Done in 4.23s.</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>저는 3.2.0 version의 <code>mocha</code>를 설치했습니다.</p>
<ol>
<li>보다 간편한 테스트 run을 위해 <code>package.json</code>에 scripts 추가합니다.<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[...]</div><div class="line">"scripts": &#123;</div><div class="line">  "test": "mocha $(find ./ -name '*./test/**/*.test.js') --recursive -w"</div><div class="line">&#125;,</div><div class="line">[...]</div></pre></td></tr></table></figure>
</li>
</ol>
<p><code>test</code>라는 명령어로 <code>mocha</code>를 실행하며 <code>test</code>디렉토리에 있고 <code>.test.js</code>파일을 찾아 <code>mocha</code>를 실행시킵니다. 그리고 추가적으로 <code>-w</code>옵션을 통해 파일이 변경될 때마다 자동으로 테스트를 수행할 수 있게 합니다.</p>
<ol>
<li><code>/src/operator.js</code> 파일을 생성하고 다음 코드를 작성합니다.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">exports.sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> a + b;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>정말 간단하게, 두 수를 파라미터로 받아 합을 반환하는 <code>sum</code> 함수를 테스트해보겠습니다.</p>
<ol>
<li><code>/test/operator.test.js</code> 파일을 생성하고 다음 코드를 작성합니다.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> operator = <span class="built_in">require</span>(<span class="string">'../src/operator'</span>);</div><div class="line"><span class="keyword">const</span> sum = operator.sum;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>우선 <code>/src/operator.js</code> 파일을 <code>import</code>합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'operator.js Test'</span>, () =&gt; &#123;</div><div class="line">    describe(<span class="string">'sum 함수 테스트'</span>, () =&gt; &#123;</div><div class="line">        it (<span class="string">'10과 20를 넘기면 30이 나와야 한다.'</span>, done =&gt; &#123;</div><div class="line">            <span class="keyword">let</span> result = sum(<span class="number">10</span>, <span class="number">20</span>);</div><div class="line">            <span class="keyword">if</span> (result === <span class="number">30</span>) &#123;</div><div class="line">                done();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'결과 값이 30이 아니다.'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>드디어 테스트 코드를 작성했습니다. <code>describe</code>에서는 테스트의 <code>이름</code>을 지정합니다. 위 예제 코드처럼 중첩하여 사용할 수 있으며 테스트를 구분하는 <code>section</code>이라고 표현할 수 있겠습니다. 그리고 실행해야하는 부분(단위 테스트 단위)을 콜백으로 넘겨줍니다. <code>it</code> 구문에는 단위 테스트 이름을 작성하고 실제 실행되는 코드를 콜백(<code>done</code>)으로 넘겨줍니다. 그런 다음, <code>package.json</code>에 작성했던 <code>npm test</code> 명령어를 통해 test를 실행해줍니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm test</div><div class="line">  sum 함수 테스트</div><div class="line">    ✓ 10과 20를 넘기면 30이 나와야 한다.</div><div class="line"></div><div class="line">  1 passing (2ms)</div></pre></td></tr></table></figure></p>
<p>이렇게 나왔으면 테스트가 통과한 것입니다. <code>done()</code> 메소드가 실행되면 테스트가 통과하도록 테스트 코드를 작성할 수 있습니다. <code>result === 40</code>처럼 옳지 않은 값을 넣어주면, <code>throw Error()</code>가 실행되면서 테스트가 실패했다는 메세지가 나타납니다.</p>
<h3 id="Mocha의-hook"><a href="#Mocha의-hook" class="headerlink" title="Mocha의 hook"></a>Mocha의 hook</h3><p><code>Mocha</code>에서는 추가적으로 네 가지의 함수를 제공합니다. 각각은 테스트 코드가 실행되기 전과 후에 실행되는 함수입니다.</p>
<ul>
<li>before<br>: 테스트 코드가 실행되기 전에 한 번 실행된다.</li>
<li>beforeEach<br>: (테스트가 여러 개일 경우) 각각의 테스트 코드가 실행되기 전마다 실행된다.</li>
<li>afterEach<br>: (테스트가 여러 개일 경우) 각각의 테스트 코드가 실행된 후마다 실행된다.</li>
<li>after<br>: 모든 테스트 코드가 실행된 후 한 번 실행된다.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'operator.js Test'</span>, () =&gt; &#123;</div><div class="line">    describe(<span class="string">'sum 함수 테스트'</span>, () =&gt; &#123;</div><div class="line">        before(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"before"</span>);</div><div class="line">        &#125;);</div><div class="line">        beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="string">"beforeEach"</span>);</div><div class="line">        &#125;);</div><div class="line">        it (<span class="string">'10과 20를 넘기면 30이 나와야 한다.'</span>, (done) =&gt; &#123;</div><div class="line">            <span class="keyword">let</span> result = sum(<span class="number">10</span>, <span class="number">20</span>);</div><div class="line">            <span class="keyword">if</span> (result === <span class="number">30</span>) &#123;</div><div class="line">                done();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">'결과 값이 30이 아니다.'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        after(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"after"</span>);</div><div class="line">        &#125;);</div><div class="line">        afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"afterEach"</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>각각 상황에 맞는 <code>console.log()</code>를 찍어줬습니다. <code>npm test</code> 명령어를 실행해보겠습니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="built_in">test</span></div><div class="line">  operator.js Test</div><div class="line">    sum 함수 테스트</div><div class="line">before</div><div class="line">beforeEach</div><div class="line">      ✓ 10과 20를 넘기면 30이 나와야 한다.</div><div class="line">afterEach</div><div class="line">after</div><div class="line"></div><div class="line">  1 passing (3ms)</div></pre></td></tr></table></figure></p>
<p>각각의 함수들이 위치하는 라인은 상관이 없습니다. 가독성이 좋기 위해 의미상으로 적절한 위치에 코드를 작성했습니다. 정말 간단하게 <code>Mocha</code>를 사용해봤습니다. <code>if</code>문을 통한 테스트 코드 작성이 너무 지저분했는데요, 이제 <code>Mocha</code>와 함께 <code>Chai</code>를 사용해보겠습니다!</p>
<p><a href="https://jaeyeophan.github.io/2017/04/23/BDD-2-chai/">&gt;&gt;Chai 테스트 프레임워크 &gt;&gt;</a></p>
<p>예제로 사용된 코드는 <a href="https://github.com/JaeYeopHan/javascript_test_tutorial" target="_blank" rel="external">Github Respository</a>에서 확인하실 수 있습니다.</p>
<p><em>[TDD] 1. end</em></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/23/BDD-1-mocha/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/23/BDD-1-mocha/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2017/04/22/ES6-10-Generator/">
                            [ES6] 10. Generator
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-22T17:49:54+09:00">
	
		    Apr 22, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/ECMAScript6/">ECMAScript6</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><img src="/images/javascript_es6.png" alt=""></p>
<h1 id="ES6-10-Generator"><a href="#ES6-10-Generator" class="headerlink" title="[ES6] 10. Generator"></a>[ES6] 10. Generator</h1><h2 id="Generator는-무엇인가"><a href="#Generator는-무엇인가" class="headerlink" title="Generator는 무엇인가?"></a>Generator는 무엇인가?</h2><p><code>Generator function</code>으로 반환된 값을 <code>Generator Object</code>라고 하고 이 <code>Generator Obejct</code>는 <code>iterator</code> 프로토콜을 따르고 있다. 즉 <code>[Symbol.iterator]</code>가 프로퍼티에 추가되어 있다는 것이다. <code>Generator function</code>안에서는 <code>yield</code>라는 키워드를 사용해서 함수에 내부에 작성된 코드를 전부 실행하지 않는다. 제너레이터 함수는 <code>yield</code>를 기준으로 실행을 나누어서 진행한다. <code>iterator</code>프로토콜을 따르고 있기 때문에 순차적으로 실행할 수 있는 것이다.<br><em>cf&gt;<code>Generator function</code>를 <code>제너레이터 함수</code>로, <code>Generator Object</code>를 <code>제너레이터 오브젝트</code>로 표기.</em></p>
<h2 id="Generator-Function"><a href="#Generator-Function" class="headerlink" title="Generator Function"></a>Generator Function</h2><p><code>function*</code>로 표현할 수 있으며, 작성할 때는 일반 <code>function</code>처럼 선언문과 표현식으로 작성할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">calc</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"generator start"</span>);</div><div class="line">  <span class="keyword">yield</span> prev + post;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>or<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> calc = <span class="function"><span class="keyword">function</span>*(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"generator start"</span>);</div><div class="line">  <span class="keyword">yield</span> prev + post;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>제너리에터 함수에 의해 반환되는 값은 제너레이터 오브젝트이다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> generator = calc(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> generator); <span class="comment">// object</span></div></pre></td></tr></table></figure></p>
<p>제너레이터 오브젝트를 반환하는 순간에는 오브젝트를 반환하기만 할 뿐, 내부 코드는 실행되지 않는다.</p>
<h2 id="Generator-Object"><a href="#Generator-Object" class="headerlink" title="Generator Object"></a>Generator Object</h2><p><code>new</code> 키워드를 사용하여 인스턴스를 생성할 수 없다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> cal = <span class="keyword">new</span> calc();<span class="comment">// Error</span></div><div class="line"><span class="comment">//TypeError: calc is not a constructor</span></div></pre></td></tr></table></figure></p>
<p><code>next()</code> 메소드를 통해 제너레이터 함수를 실행시킬 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(generator.next());</div><div class="line"><span class="comment">//generator start</span></div><div class="line"><span class="comment">//&#123; value: 3, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(generator.next());</div><div class="line"><span class="comment">//&#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure></p>
<p><code>iterator</code>의 <code>next()</code>메소드를 실행시킨 것처럼 <code>value</code>와 <code>done</code>이라는 프로퍼티를 갖고 있는 객체로 반환된다. 그런데 첫번째 <code>next()</code>메소드 실행 시에는 <code>generator start</code>가 출력되었는데, 두번째 실행 시에는 출력되지 않았다. <code>yield</code>라는 키워드를 중심으로 함수가 나눠 실행되는 것이다.</p>
<h2 id="yield-키워드-함수를-실행하고-멈출-수-있다"><a href="#yield-키워드-함수를-실행하고-멈출-수-있다" class="headerlink" title="yield 키워드, 함수를 실행하고 멈출 수 있다."></a>yield 키워드, 함수를 실행하고 멈출 수 있다.</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[returnValue] = <span class="keyword">yield</span>[expression]</div></pre></td></tr></table></figure>
<p>위와 같은 구문으로 <code>yield</code>를 작성할 수 있다.</p>
<p>위의 예제 코드에서 살펴봤듯이, <code>next()</code> 메소드의 반환 값은 <code>value</code>와 <code>done</code>으로 구성되어 있는 오브젝트이다. 제너레이터의 메소드 <code>next()</code>에서 이 두 가지의 값은 yield에 의해 결정된다. <code>value</code>가 결정되는 규칙이 조금 복잡하다.</p>
<h5 id="value-결정-규칙"><a href="#value-결정-규칙" class="headerlink" title="value 결정 규칙"></a>value 결정 규칙</h5><ul>
<li><code>expression</code>으로 반환되는 값이 할당.<br>이 때, <code>expression</code>에 있는 값이 <code>returnValue</code>에 할당되지 않는다.</li>
<li><code>expression</code>에 아무것도 없으면 <code>undefined</code>가 할당.<br>이 때, <code>next()</code>의 파라미터로 넘겨지는 값이 <code>returnValue</code>에 할당된다.</li>
</ul>
<h5 id="done-결정-규칙"><a href="#done-결정-규칙" class="headerlink" title="done 결정 규칙"></a>done 결정 규칙</h5><ul>
<li>계속 수행할 <code>yield</code>가 남아있으면 <code>false</code>.</li>
<li>더 이상 실행할 <code>yield</code>가 없으면 <code>true</code>.</li>
</ul>
<p><em>예제 코드를 살펴보자.</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">calc</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> result = <span class="number">0</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`Initial result: <span class="subst">$&#123;result&#125;</span>`</span>);</div><div class="line">  result = <span class="keyword">yield</span> prev + post;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`Middle result: <span class="subst">$&#123;result&#125;</span>`</span>);</div><div class="line"></div><div class="line">  result = <span class="keyword">yield</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`Last result: <span class="subst">$&#123;result&#125;</span>`</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> generator = calc(<span class="number">10</span>, <span class="number">20</span>);</div></pre></td></tr></table></figure></p>
<p>위에서 언급한 규칙에 대한 내용을 모두 담고 있는 예제코드이다. <code>console.log()</code>에는 어떠한 값이 찍히게 될까? 코드를 통해 하나씩 살펴보자.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(generator.next());</div><div class="line"><span class="comment">// Initial result: 0</span></div><div class="line"><span class="comment">// &#123; value: 30, done: false &#125;</span></div></pre></td></tr></table></figure></p>
<p><code>next()</code> 메소드를 실행시키면 첫번째 yield까지 실행한다.<br>초기 <code>result</code> 변수에 대한 값이 출력되고,<br><code>expression</code>으로 계산된 값인 <code>30</code>이 <code>value</code>이 출력된다.<br>아직 <code>yield</code>가 남았으니 <code>done</code>은 <code>false</code>가 되겠다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(generator.next());</div><div class="line"><span class="comment">// Middle result: undefined</span></div><div class="line"><span class="comment">// &#123; value: undefined, done: false &#125;</span></div></pre></td></tr></table></figure>
<p>두번째 yield까지 실행한다.<br><code>expression</code> 값이 <code>result</code>에 할당되지 않은 것을 확인할 수 있다.<br>아직 <code>yield</code>가 남았으니 <code>done</code>은 <code>false</code>가 되겠다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(generator.next(<span class="number">20</span>));</div><div class="line"><span class="comment">// Last result: 20</span></div><div class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure>
<p>yield가 없으므로 brace까지 실행한다.<br><code>next()</code>메소드의 파라미터로 넘겨진 <code>20</code>이 <code>result</code> 변수에 할당된 것을 확인할 수 있다.<br>더이상 <code>yield</code> 키워드가 없으므로 <code>done</code>은 <code>true</code>가 된다.</p>
<h3 id="yield-대신-return"><a href="#yield-대신-return" class="headerlink" title="yield 대신 return"></a>yield 대신 return</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">calc</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> prev + post;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> generator = calc(<span class="number">10</span>, <span class="number">20</span>);</div><div class="line"><span class="built_in">console</span>.log(generator.next());</div><div class="line"><span class="comment">// &#123; value: 30, done: true &#125;</span></div></pre></td></tr></table></figure>
<p><code>return</code> 키워드 뒤에 오는 값이 <code>value</code>에 할당되고 <code>yield</code> 키워드의 유무와 상관없이 <code>done</code>에는 <code>true</code>가 할당된다. <code>return</code>은 수행되고 있는 이터레이터를 종료시키는 역할을 수행한다.</p>
<h3 id="이터레이터-종료하기"><a href="#이터레이터-종료하기" class="headerlink" title="이터레이터 종료하기"></a>이터레이터 종료하기</h3><p><code>yield</code> 키워드의 유무와 상관없이 이터레이터를 종료하고자 할 때는 제너레이터 오브젝트의 <code>throw()</code>메소드와 <code>return()</code>메소드를 사용할 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">idMaker</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> value = <span class="number">0</span>;</div><div class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</div><div class="line">    <span class="keyword">yield</span> ++value;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> g = idMaker();</div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 3, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.return(<span class="number">100</span>));<span class="comment">// &#123; value: 100, done: true &#125;</span></div></pre></td></tr></table></figure>
<p><code>return()</code>메소드의 파라미터로 넘어가는 값이 <code>value</code>에 할당된다.<br>위의 예제 코드에 <code>return()</code> 대신 <code>throw()</code>를 호출하게 되면 파라미터로 넘겨준 Error Message를 출력하고 이터레이터가 바로 종료된다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">idMaker</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> value = <span class="number">0</span>;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> ++value;</div><div class="line">    &#125;    </div><div class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Error message: <span class="subst">$&#123;e&#125;</span>`</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> g = idMaker();</div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 3, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.throw(<span class="string">"Throw Exception"</span>));</div><div class="line"><span class="comment">//Error message: Throw Exception</span></div><div class="line"><span class="comment">//&#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure></p>
<p>여기서 <code>try-catch</code> 구문에 <code>yield</code>를 추가하면 어떻게 될까?<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">idMaker</span>(<span class="params">prev, post</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> value = <span class="number">0</span>;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> ++value;</div><div class="line">    &#125;    </div><div class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">    <span class="keyword">yield</span> e;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> g = idMaker();</div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 3, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.throw(<span class="string">"Throw Exception"</span>));</div><div class="line"><span class="comment">//&#123; value: 'Throw Exception', done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure></p>
<p>바로 이터레이터가 종료되지 않고 <code>yield</code> 다음의 구문이 실행된다.</p>
<h2 id="yield-키워드"><a href="#yield-키워드" class="headerlink" title="yield* 키워드"></a>yield* 키워드</h2><p><code>yield</code>에 <code>*</code>를 붙인 다음 <code>[expression]</code>에 이터러블 오브젝트를 작성할 수 있다. 이렇게 되면 해당 <code>yield</code>가 수행될 때 이터러블 오브젝트를 순회하게 된다. 코드를 통해 살펴보자.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</div><div class="line">  <span class="keyword">yield</span>* [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</div><div class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> g = gen();</div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 10, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 20, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 30, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next());<span class="comment">// &#123; value: undefined, done: true &#125;</span></div></pre></td></tr></table></figure></p>
<p>우선적으로 배열을 순회한 후에, 다음에 해당하는 <code>yield</code>를 수행하게 된다.</p>
<h4 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h4><p>문법을 아는 것과 실제 프로그래밍에서 적용하는 것은 확실히 다른 문제이다. 지금 <code>yield</code>의 향연을 보고 이걸 어디에다가 쓰나 하는 생각이 들 것이다. 다음 링크들을 참고하면 좀 나아질 것 같아서, 몇 가지 링크를 첨부한다.</p>
<p><a href="http://meetup.toast.com/posts/73" target="_blank" rel="external">ES6의 제너레이터를 사용한 비동기 프로그래밍</a><br><a href="http://www.haruair.com/blog/3425" target="_blank" rel="external">Javascript의 Generator와 Koa.js</a><br><a href="http://blog.coderifleman.com/2014/11/15/javascript-and-async-error/" target="_blank" rel="external">자바스크립트와 비동기 오류 처리</a></p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="external">MDN function*</a></p>
<p>예제로 사용된 코드는 <a href="https://github.com/JaeYeopHan/ECMAScript6_study" target="_blank" rel="external">Github Respository</a>에서 확인하실 수 있습니다.</p>
<p><em>10. end</em></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2017/04/22/ES6-10-Generator/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2017/04/22/ES6-10-Generator/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="undefined"/>
                </div>
            </a>
            
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/archives/2017/04/page/2/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 3</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Jbee. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Jbee</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
